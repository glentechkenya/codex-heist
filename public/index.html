<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Codex Heist</title>

<style>
body { margin:0; background:#0b0b0b; color:#00ffcc; font-family:Arial; display:flex; flex-direction:column; height:100vh;}
header { padding:15px; text-align:center; border-bottom:1px solid #00ffcc;}
#messages { flex:1; overflow-y:auto; padding:10px;}
.msg { background:#111; padding:10px; border-radius:10px; margin-bottom:10px; max-width:80%;}
.me { background:#00ffcc; color:black; margin-left:auto;}
.system { text-align:center; color:gray; font-size:12px;}
.input { display:flex; padding:10px; border-top:1px solid #00ffcc;}
input { flex:1; padding:12px; border:none; background:#111; color:#00ffcc; border-radius:20px;}
button { margin-left:8px; padding:12px 18px; background:#00ffcc; border:none; border-radius:20px;}
</style>
</head>

<body>

<header>üï∂Ô∏è Codex Heist</header>
<div id="messages"></div>

<div class="input">
  <input id="msg" placeholder="Type‚Ä¶" />
  <button onclick="send()">Send</button>
</div>

<script src="/socket.io/socket.io.js"></script>
<script>
const socket = io();

let username = prompt("Enter codename");
let room = prompt("Enter room name");

socket.emit("join-room", { room, username });

const messages = document.getElementById("messages");

socket.on("message", msg => {
  const div = document.createElement("div");

  if(msg.includes("joined") || msg.includes("left")){
    div.className="system";
  } else if(msg.startsWith(username + ":")){
    div.className="msg me";
    msg = msg.replace(username + ": ", "");
  } else {
    div.className="msg";
  }

  div.textContent = msg;
  messages.appendChild(div);
  messages.scrollTop = messages.scrollHeight;
});

function send(){
  const input = document.getElementById("msg");
  if(!input.value) return;
  socket.emit("message", input.value);
  input.value="";
}
</script>

</body>
</html>
